<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>Log in — Task Manager</title>

  <!-- ตั้งค่า backend ถ้าพอร์ตไม่ใช่ 8080 แก้ค่านี้ได้ -->
  <script>
    window.API_BASE = 'https://task-manager-production-6c61.up.railway.app';
    console.log('API_BASE set to:', window.API_BASE);
  </script>

  <link rel="stylesheet" href="../styles.css"/>
  <link rel="stylesheet" href="./styles.css"/>
</head>
<body class="auth">
  <header class="mastbar">
    <div class="mast-inner">
      <a class="brand" href="../index.html">task<span class="accent">manager</span></a>
      <!-- จะถูกซ่อนด้วย body.auth .right-actions -->
      <nav class="right-actions">
        <a class="nav-link muted" href="./login.html">Login</a>
        <a class="btn primary gradient-anim sheen" href="./signup.html">Sign up</a>
      </nav>
    </div>
  </header>

  <main class="section auth-wrap">
    <div class="container">
      <section class="card signup-card card-tall" aria-labelledby="login-title">
        <div class="card-body">
          <h1 id="login-title" class="auth-title center">
            Log in to <span class="accent">Task Manager</span>
          </h1>

          <div class="stack">
            <!-- Google -->
            <button type="button" class="oauth-btn" id="btn-google" aria-label="Continue with Google" onclick="handleGoogleLogin()">
              <img src="https://www.svgrepo.com/show/475656/google-color.svg" alt="Google logo"/>
              Continue with Google
            </button>

            <div class="divider" role="separator" aria-hidden="true"><span>or</span></div>

            <!-- username or email -->
            <label class="label" for="login-username">
              <input
                id="login-username"
                class="input"
                type="text"
                placeholder="Username or Email"
                autocomplete="username"
                autocapitalize="none"
                spellcheck="false"
                aria-label="Username or Email"
                required
              />
            </label>

            <!-- password -->
            <label class="label" for="login-password">
              <input
                id="login-password"
                class="input"
                type="password"
                placeholder="Enter your password"
                autocomplete="current-password"
                aria-label="Password"
                required
              />
            </label>

            <!-- Error message area -->
            <div id="error-message" class="error-message" style="display: none;">
              <p class="error-text"></p>
            </div>

            <button id="btn-login" type="button"
                    class="btn primary gradient-anim sheen btn-cta">
              Log in
            </button>
          </div>
        </div>

        <!-- ย้ายข้อความ Sign up มาไว้ในตำแหน่ง foot ของการ์ด -->
        <div class="card-foot">
          <p class="subnote center">
            Don’t have an account yet?
            <a class="link" href="./signup.html">Sign up</a>
          </p>
        </div>
      </section>
    </div>
  </main>

  <!-- ย้าย © ลงขอบล่างสุดของหน้า -->
  <footer class="footer">
    <div class="container center muted">© 2025 Task Manager</div>
  </footer>

  <script>
    // Force fresh load of JavaScript file
    const script = document.createElement('script');
    script.type = 'module';
    script.src = `./auth-v2.js?v=${Date.now()}`;
    document.body.appendChild(script);
  </script>
</body>
</html>
